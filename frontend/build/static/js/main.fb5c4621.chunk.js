(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{10:function(e,t,n){e.exports={pagenumbers:"Pagination_pagenumbers__2tutM",active:"Pagination_active__1sMMo",listitem:"Pagination_listitem__2zME8",lstitem:"Pagination_lstitem__2iFGG",filesname:"Pagination_filesname__1zph6",filename:"Pagination_filename__2exNa",nothtoshow:"Pagination_nothtoshow__34ATH"}},13:function(e,t,n){e.exports={container:"UserFilesList_container__LPwty",seccontainer:"UserFilesList_seccontainer__2mKb_",listitem:"UserFilesList_listitem__2r6iW",filesname:"UserFilesList_filesname__2aZsg",bckbtn:"UserFilesList_bckbtn__2SzX9"}},16:function(e,t,n){e.exports={signup:"Register_signup__3tifD",signupcontainer:"Register_signupcontainer__41QRV"}},19:function(e,t,n){e.exports={signin:"Signin_signin__3UKzm",signincontainer:"Signin_signincontainer__30tgR"}},20:function(e,t,n){e.exports={home:"Home_home__ZE2_M",homecontainer:"Home_homecontainer__2TSNh"}},21:function(e,t,n){e.exports={forgotpass:"ForgotPass_forgotpass__2MLjG",container:"ForgotPass_container__roH1i"}},23:function(e,t,n){},31:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(24),i=n.n(s),o=(n(31),n(2)),r=n(3),l=(n(23),n(0)),u=function(e){var t=e.trigger,n=e.setTrigger,c=e.content;return t?Object(l.jsx)("div",{className:"popup",children:Object(l.jsxs)("div",{className:"inner-popup",children:[Object(l.jsx)("button",{className:"close-btn",onClick:function(){return n(!1)},children:"Close"}),c]})}):null},j=n(16),b=n.n(j),d=function(){var e=Object(r.f)(),t=Object(c.useState)(""),n=Object(o.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(""),j=Object(o.a)(i,2),d=j[0],h=j[1],f=Object(c.useState)(""),O=Object(o.a)(f,2),p=O[0],m=O[1],g=Object(c.useState)(!1),x=Object(o.a)(g,2),v=x[0],_=x[1],S=Object(c.useState)(""),N=Object(o.a)(S,2),w=N[0],D=N[1],y=Object(c.useState)(null),C=Object(o.a)(y,2),P=C[0],F=C[1];Object(c.useEffect)((function(){localStorage.getItem("id")&&e.push("/user/dashboard")}),[e]);return Object(l.jsx)("div",{className:b.a.signup,children:Object(l.jsxs)("div",{className:b.a.signupcontainer,children:[Object(l.jsx)("h1",{children:"Register"}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("name",a),t.append("email",d),t.append("password",p),t.append("avatar",P),fetch("/account/signup",{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){e.success?(D(e.message),_(!v),s(""),h(""),m("")):(D(e.message),_(!v))}))},children:[Object(l.jsx)("input",{type:"text",name:"name",value:a,placeholder:"Enter full name",onChange:function(e){s(e.target.value)},required:!0}),Object(l.jsx)("input",{type:"email",name:"email",value:d,placeholder:"Enter email",onChange:function(e){h(e.target.value)},required:!0}),Object(l.jsx)("input",{type:"password",name:"password",value:p,placeholder:"Enter password",onChange:function(e){m(e.target.value)},required:!0}),Object(l.jsx)("input",{type:"file",name:"avatar",onChange:function(e){return F(e.target.files[0])}}),Object(l.jsx)("input",{type:"submit",value:"SIGN UP"})]}),Object(l.jsx)(u,{trigger:v,setTrigger:_,content:w})]})})},h=n(7),f=n(19),O=n.n(f),p=function(){var e=Object(r.f)(),t=Object(c.useState)(""),n=Object(o.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(""),j=Object(o.a)(i,2),b=j[0],d=j[1],f=Object(c.useState)(!1),p=Object(o.a)(f,2),m=p[0],g=p[1],x=Object(c.useState)(""),v=Object(o.a)(x,2),_=v[0],S=v[1];Object(c.useEffect)((function(){localStorage.getItem("id")&&e.push("/user/dashboard")}),[e]);return Object(l.jsx)("div",{className:O.a.signin,children:Object(l.jsxs)("div",{className:O.a.signincontainer,children:[Object(l.jsx)("h1",{children:"Sign In"}),Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n={email:a,password:b};fetch("/account/login",{method:"POST",headers:{Accept:"application/json","content-type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(t){t.success?(localStorage.setItem("id",t.id),e.push("/user/dashboard")):(S(t.message),g(!m))}))},children:[Object(l.jsx)("input",{type:"email",name:"email",value:a,placeholder:"email",onChange:function(e){s(e.target.value)},required:!0}),Object(l.jsx)("input",{type:"password",name:"password",value:b,placeholder:"password",onChange:function(e){d(e.target.value)},required:!0}),Object(l.jsx)("input",{type:"submit",value:"SIGN IN"}),Object(l.jsx)(h.b,{to:"/account/forgotpass",children:"Forgot password ?"})]}),Object(l.jsx)(u,{trigger:m,setTrigger:g,content:_})]})})},m=n(20),g=n.n(m),x=function(){var e=Object(r.f)();return Object(c.useEffect)((function(){localStorage.getItem("id")&&e.push("/user/dashboard")}),[e]),Object(l.jsx)("div",{className:g.a.home,children:Object(l.jsxs)("div",{className:g.a.homecontainer,children:[Object(l.jsxs)("h1",{children:["Welcome to DRIVE",Object(l.jsx)("span",{children:"Beta"})]}),Object(l.jsx)(h.b,{to:"/account/register",children:"Register"}),Object(l.jsx)(h.b,{to:"/account/signin",children:"Sign In"})]})})},v=n(21),_=n.n(v),S=function(){var e=Object(r.f)(),t=Object(c.useState)(""),n=Object(o.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(!1),j=Object(o.a)(i,2),b=j[0],d=j[1],h=Object(c.useState)(""),f=Object(o.a)(h,2),O=f[0],p=f[1];Object(c.useEffect)((function(){localStorage.getItem("id")&&e.push("/user/dashboard")}),[e]);return Object(l.jsx)("div",{className:_.a.forgotpass,children:Object(l.jsxs)("div",{className:_.a.container,children:[Object(l.jsx)("h1",{children:"Submit Email"}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={email:a};fetch("/account/forgotpassword",{method:"POST",headers:{Accept:"application/json","content-type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){e.success?(p(e.message),d(!b),s("")):(p(e.message),d(!b))}))},children:[Object(l.jsx)("input",{type:"email",name:"email",value:a,onChange:function(e){s(e.target.value)},placeholder:"email"}),Object(l.jsx)("input",{type:"submit",value:"SUBMIT"})]}),Object(l.jsx)(u,{trigger:b,setTrigger:d,content:O})]})})},N=function(e){var t=e.trigger,n=e.setTrigger,a=e.setShowPopup,s=e.setMessage,i=Object(c.useState)(null),r=Object(o.a)(i,2),u=r[0],j=r[1],b=localStorage.getItem("id");return t?Object(l.jsx)("div",{className:"popup",children:Object(l.jsxs)("div",{className:"inner-popup",children:[Object(l.jsx)("button",{className:"close-btn",onClick:function(){return n(!1)},children:"Close"}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("avatar",u),fetch("/user/updateprofile/".concat(b),{method:"PUT",body:t}).then((function(e){e.json().then((function(e){e.success,a(!0),s(e.message)}))})),n(!1)},children:[Object(l.jsx)("input",{type:"file",name:"avatar",onChange:function(e){j(e.target.files[0])},required:!0}),Object(l.jsx)("input",{type:"submit",value:"Upload",className:"upload-btn"})]})]})}):null},w=n(9),D=n.n(w),y=function(){var e=Object(r.f)(),t=Object(c.useState)(""),n=Object(o.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(""),j=Object(o.a)(i,2),b=j[0],d=j[1],h=Object(c.useState)(null),f=Object(o.a)(h,2),O=f[0],p=f[1],m=Object(c.useState)(!1),g=Object(o.a)(m,2),x=g[0],v=g[1],_=Object(c.useState)(!1),S=Object(o.a)(_,2),w=S[0],y=S[1],C=Object(c.useState)(""),P=Object(o.a)(C,2),F=P[0],E=P[1],k=localStorage.getItem("id");Object(c.useEffect)((function(){fetch("/user/".concat(k)).then((function(e){e.json().then((function(e){e.success&&(s(e.name),d(e.profilePicPath))}))}))}));var I;return I="http://192.168.43.179:4000/"+b,Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:D.a.dashboard,children:[Object(l.jsxs)("div",{className:D.a.container,children:[Object(l.jsx)("div",{className:D.a.logo,children:Object(l.jsxs)("h1",{children:["DRIVE",Object(l.jsx)("span",{children:"Beta"})]})}),Object(l.jsxs)("div",{className:D.a.leftside,children:[Object(l.jsx)("div",{className:D.a.profilePicDiv,children:Object(l.jsx)("img",{src:I,alt:"profile pic",onClick:function(){y(!0)}})}),Object(l.jsx)("h1",{children:a}),Object(l.jsx)("button",{onClick:function(){localStorage.removeItem("id"),e.push("/")},children:"Sign Out"})]})]}),Object(l.jsx)("div",{className:D.a.userfiles,children:Object(l.jsxs)("div",{className:D.a.filecont,children:[Object(l.jsx)("h1",{children:"Upload your files"}),Object(l.jsx)("div",{className:D.a.files,children:Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("pdf",O),t.append("userId",k),fetch("/user/files",{method:"POST",body:t}).then((function(e){e.json().then((function(e){v(!x),E("File uploaded successfully")}))}))},children:[Object(l.jsx)("input",{type:"file",name:"pdf",onChange:function(e){p(e.target.files[0])},required:!0}),Object(l.jsx)("button",{type:"submit",children:"Upload"})]})}),Object(l.jsx)("button",{onClick:function(){e.push("/user/dashboard/files")},children:"Show uploaded files"})]})})]}),Object(l.jsx)(u,{trigger:x,content:F,setTrigger:v}),Object(l.jsx)(N,{trigger:w,setTrigger:y,setShowPopup:v,setMessage:E})]})},C=function(e){var t=e.Cmp,n=Object(r.f)();return Object(c.useEffect)((function(){localStorage.getItem("id")||n.push("/")}),[n]),Object(l.jsx)(r.a,{children:Object(l.jsx)(t,{})})},P=n(22),F=n.n(P),E=n(26),k=n(10),I=n.n(k),T=function(e){for(var t=e.data,n=e.downloadFile,a=e.deleteFile,s=Object(c.useState)(1),i=Object(o.a)(s,2),r=i[0],u=i[1],j=Object(c.useState)(5),b=Object(o.a)(j,2),d=b[0],h=b[1],f=Object(c.useState)(0),O=Object(o.a)(f,2),p=O[0],m=O[1],g=5*r,x=g-5,v=t.slice(x,g),_=[],S=1;S<=Math.ceil(t.length/5);S++)_.push(S);var N=_.map((function(e){return e<=d&&e>=p?Object(l.jsx)("li",{onClick:function(){u(e)},className:r===e?I.a.active:null,children:e},e):null})),w=v.map((function(e,t){return Object(l.jsxs)("li",{className:I.a.listitem,children:[Object(l.jsx)("div",{className:I.a.filesname,children:e.fileName})," ",Object(l.jsx)("button",{name:t,id:e._id,onClick:n,children:"Download"}),Object(l.jsx)("button",{name:t,id:e._id,onClick:a,children:"Delete"})]},e._id)}));return Object(l.jsx)("div",{children:0===t.length?Object(l.jsx)("div",{className:I.a.nothtoshow,children:Object(l.jsx)("h1",{children:"Nothing to show"})}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:I.a.lstitem,children:[Object(l.jsx)("span",{className:I.a.filename,children:"File Name"}),Object(l.jsx)("p",{children:"Download"}),Object(l.jsx)("p",{children:"Delete"})]}),Object(l.jsx)("hr",{}),w,Object(l.jsxs)("ul",{className:I.a.pagenumbers,children:[Object(l.jsx)("li",{children:Object(l.jsx)("button",{onClick:function(){r-1<p&&(m(r-5),h(r-1)),u(r-1)},disabled:r===_[0],children:"Prev"})}),N,Object(l.jsx)("li",{children:Object(l.jsx)("button",{onClick:function(){r+1>d&&(m(r+1),h(r+5)),u(r+1)},disabled:r===_[_.length-1],children:"Next"})})]})]})})},U=n(13),R=n.n(U),L=function(){var e=Object(r.f)(),t=Object(c.useState)([]),n=Object(o.a)(t,2),a=n[0],s=n[1],i=localStorage.getItem("id");return Object(c.useEffect)((function(){fetch("/user/userFilesList/".concat(i)).then((function(e){e.json().then((function(e){s(e)}))})).catch((function(e){console.log(e)}))}),[i]),Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:R.a.container,children:Object(l.jsxs)("div",{className:R.a.seccontainer,children:[Object(l.jsx)(T,{data:a,downloadFile:function(e){var t=a[e.target.name].userFilePath;t=t.split("\\");var n=a[e.target.name].fileName;fetch("/user/download/".concat(t[3])).then(function(){var e=Object(E.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,t.blob();case 3:return e.t1=e.sent,e.abrupt("return",{filename:e.t0,blob:e.t1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){var t=new Blob([e.blob]);if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(t);else{var n=window.URL.createObjectURL(t),c=document.createElement("a");c.href=n,c.download=e.filename,c.click(),setTimeout((function(){window.URL.revokeObjectURL(n)}),250)}})).catch((function(e){console.log("DOWNLOAD ERROR",e)}))},deleteFile:function(e){fetch("/user/delete/".concat(e.target.id),{method:"DELETE"}).then((function(t){t.json().then((function(t){s(a.splice(e.target.name,1)),s(a)}))})).catch((function(e){console.log(e)}))}}),Object(l.jsx)("div",{className:R.a.bckbtn,children:Object(l.jsx)("button",{onClick:function(){e.goBack()},children:"Go Back"})})]})})})};n(42);var M=function(){return Object(l.jsx)("div",{children:Object(l.jsx)(h.a,{children:Object(l.jsxs)(r.c,{children:[Object(l.jsx)(r.a,{exact:!0,path:"/",component:x}),Object(l.jsx)(r.a,{exact:!0,path:"/user/dashboard",children:Object(l.jsx)(C,{Cmp:y})}),Object(l.jsx)(r.a,{exact:!0,path:"/user/dashboard/files",children:Object(l.jsx)(C,{Cmp:L})}),Object(l.jsx)(r.a,{exact:!0,path:"/account/register",component:d}),Object(l.jsx)(r.a,{exact:!0,path:"/account/signin",component:p}),Object(l.jsx)(r.a,{exact:!0,path:"/account/forgotpass",component:S})]})})})};i.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(M,{})}),document.getElementById("root"))},9:function(e,t,n){e.exports={dashboard:"Dashboard_dashboard__eWN0b",container:"Dashboard_container__1-TTQ",logo:"Dashboard_logo__3c4YG",leftside:"Dashboard_leftside__2ixDC",profilePicDiv:"Dashboard_profilePicDiv__2mPqI",userfiles:"Dashboard_userfiles__2zH0T",filecont:"Dashboard_filecont__QfCXq",files:"Dashboard_files__3tNE5"}}},[[43,1,2]]]);
//# sourceMappingURL=main.fb5c4621.chunk.js.map