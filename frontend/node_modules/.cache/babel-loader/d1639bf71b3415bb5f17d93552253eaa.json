{"ast":null,"code":"import _slicedToArray from\"C:/Users/Akhlesh dixit/Desktop/reactjs/DRIVEBeta/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useHistory}from'react-router-dom';import{Popup}from'../../Components/Popup/Popup';import styles from'./Register.module.css';// import axios from 'axios';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Register=function Register(){var history=useHistory();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showPopup=_useState8[0],setShowPopup=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),avatar=_useState12[0],setAvatar=_useState12[1];useEffect(function(){// if(sessionStorage.getItem('email')){\n//     history.push('/user/dashboard');\n// }\nif(localStorage.getItem('id')){history.push('/user/dashboard');}},[history]);var handleSubmit=function handleSubmit(e){e.preventDefault();var formData=new FormData();formData.append('name',name);formData.append('email',email);formData.append('password',password);formData.append('avatar',avatar);// axios.post('http://localhost:4000/signup',formData,{headers:{'content-type':'multipart/form-data'}}).then((res)=>{\n//     console.log('image uploaded successfully');\n// }).catch((err)=>{\n//     console.log('err',err);\n// });\nfetch('/account/signup',{method:\"POST\",body:formData}).then(function(result){return result.json();}).then(function(res){if(res.success){setMessage(res.message);setShowPopup(!showPopup);setName('');setEmail('');setPassword('');// history.push('/account/signin');\n}else{setMessage(res.message);setShowPopup(!showPopup);}});};return/*#__PURE__*/_jsx(\"div\",{className:styles.signup,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.signupcontainer,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Register\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:name,placeholder:\"Enter full name\",onChange:function onChange(e){setName(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:email,placeholder:\"Enter email\",onChange:function onChange(e){setEmail(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:password,placeholder:\"Enter password\",onChange:function onChange(e){setPassword(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"avatar\",onChange:function onChange(e){return setAvatar(e.target.files[0]);}}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"SIGN UP\"})]}),/*#__PURE__*/_jsx(Popup,{trigger:showPopup,setTrigger:setShowPopup,content:message})]})});};","map":{"version":3,"sources":["C:/Users/Akhlesh dixit/Desktop/reactjs/DRIVEBeta/frontend/src/Pages/RegisterPage/Register.js"],"names":["React","useState","useEffect","useHistory","Popup","styles","Register","history","name","setName","email","setEmail","password","setPassword","showPopup","setShowPopup","message","setMessage","avatar","setAvatar","localStorage","getItem","push","handleSubmit","e","preventDefault","formData","FormData","append","fetch","method","body","then","result","json","res","success","signup","signupcontainer","target","value","files"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from 'react';\r\nimport {useHistory} from 'react-router-dom';\r\nimport { Popup } from '../../Components/Popup/Popup';\r\nimport styles from './Register.module.css';\r\n// import axios from 'axios';\r\n\r\nexport const Register = () => {\r\n\r\n    let history = useHistory();\r\n    const [name, setName] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [showPopup, setShowPopup] = useState(false);\r\n    const [message, setMessage] = useState('');\r\n    const [avatar, setAvatar] = useState(null);\r\n\r\n    useEffect(() => {\r\n        // if(sessionStorage.getItem('email')){\r\n        //     history.push('/user/dashboard');\r\n        // }\r\n        if(localStorage.getItem('id')){\r\n            history.push('/user/dashboard');\r\n        }\r\n    }, [history]);\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n\r\n        const formData = new FormData();\r\n        formData.append('name',name);\r\n        formData.append('email',email);\r\n        formData.append('password',password);\r\n        formData.append('avatar',avatar);\r\n\r\n        // axios.post('http://localhost:4000/signup',formData,{headers:{'content-type':'multipart/form-data'}}).then((res)=>{\r\n        //     console.log('image uploaded successfully');\r\n        // }).catch((err)=>{\r\n        //     console.log('err',err);\r\n        // });\r\n        \r\n        fetch('/account/signup', {\r\n            method: \"POST\",\r\n            body: formData\r\n        })\r\n            .then(result => result.json())\r\n            .then((res) => {\r\n\r\n                if (res.success) {\r\n                    setMessage(res.message);\r\n                    setShowPopup(!showPopup);\r\n                    setName('');\r\n                    setEmail('');\r\n                    setPassword('');\r\n                    // history.push('/account/signin');\r\n                }\r\n                else {\r\n                    setMessage(res.message);\r\n                    setShowPopup(!showPopup);\r\n                }\r\n            });\r\n\r\n    }\r\n    return (\r\n        <div className={styles.signup}>\r\n            <div className={styles.signupcontainer}>\r\n                <h1>Register</h1>\r\n                <form onSubmit={handleSubmit} >\r\n                    <input type=\"text\" name=\"name\" value={name} placeholder=\"Enter full name\" onChange={(e) => { setName(e.target.value) }} required />\r\n                    <input type=\"email\" name=\"email\" value={email} placeholder=\"Enter email\" onChange={(e) => { setEmail(e.target.value) }} required />\r\n                    <input type=\"password\" name=\"password\" value={password} placeholder=\"Enter password\" onChange={(e) => { setPassword(e.target.value) }} required />\r\n                    <input type=\"file\" name=\"avatar\" onChange={(e)=>setAvatar(e.target.files[0])} />\r\n                    <input type=\"submit\" value=\"SIGN UP\" />\r\n                </form>\r\n                <Popup trigger={showPopup} setTrigger={setShowPopup} content={message} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}