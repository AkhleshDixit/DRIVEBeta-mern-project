{"ast":null,"code":"import _slicedToArray from\"C:/Users/Akhlesh dixit/Desktop/reactjs/DRIVEBeta/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useHistory}from'react-router-dom';import{Popup}from'../Popup/Popup';import{ProfilePopup}from'../Popup/ProfilePopup';import dash from'./Dashboard.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var Dashboard=function Dashboard(){var history=useHistory();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),profilePicPath=_useState4[0],setProfilePicPath=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),file=_useState6[0],setFile=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showPopup=_useState8[0],setShowPopup=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showProfilePopup=_useState10[0],setShowProfilePopup=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),message=_useState12[0],setMessage=_useState12[1];var handleProfileClick=function handleProfileClick(){setShowProfilePopup(true);};var handleClick=function handleClick(){// sessionStorage.removeItem('email');\nlocalStorage.removeItem('id');history.push('/');};var id=localStorage.getItem('id');var submitFile=function submitFile(e){e.preventDefault();var fileData=new FormData();fileData.append('pdf',file);fileData.append('userId',id);fetch(\"/user/files\",{method:\"POST\",body:fileData}).then(function(res){res.json().then(function(result){setShowPopup(!showPopup);setMessage('File uploaded successfully');});});};useEffect(function(){fetch(\"/user/\".concat(id)).then(function(resp){resp.json().then(function(result){if(result.success){setName(result.name);setProfilePicPath(result.profilePicPath);}});});});var imgPath=profilePicPath;imgPath='http://192.168.43.179:4000/'+profilePicPath;// imgPath = 'https://drive-beta-akhlesh-dixit.herokuapp.com/' + profilePicPath;\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:dash.dashboard,children:[/*#__PURE__*/_jsxs(\"div\",{className:dash.container,children:[/*#__PURE__*/_jsx(\"div\",{className:dash.logo,children:/*#__PURE__*/_jsxs(\"h1\",{children:[\"DRIVE\",/*#__PURE__*/_jsx(\"span\",{children:\"Beta\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:dash.leftside,children:[/*#__PURE__*/_jsx(\"div\",{className:dash.profilePicDiv,children:/*#__PURE__*/_jsx(\"img\",{src:imgPath,alt:\"profile pic\",onClick:handleProfileClick})}),/*#__PURE__*/_jsx(\"h1\",{children:name}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,children:\"Sign Out\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:dash.userfiles,children:/*#__PURE__*/_jsxs(\"div\",{className:dash.filecont,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Upload your files\"}),/*#__PURE__*/_jsx(\"div\",{className:dash.files,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitFile,children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"pdf\",onChange:function onChange(e){setFile(e.target.files[0]);},required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Upload\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){history.push('/user/dashboard/files');},children:\"Show uploaded files\"})]})})]}),/*#__PURE__*/_jsx(Popup,{trigger:showPopup,content:message,setTrigger:setShowPopup}),/*#__PURE__*/_jsx(ProfilePopup,{trigger:showProfilePopup,setTrigger:setShowProfilePopup,setShowPopup:setShowPopup,setMessage:setMessage})]});};","map":{"version":3,"sources":["C:/Users/Akhlesh dixit/Desktop/reactjs/DRIVEBeta/frontend/src/Components/Dashboard/Dashboard.js"],"names":["React","useState","useEffect","useHistory","Popup","ProfilePopup","dash","Dashboard","history","name","setName","profilePicPath","setProfilePicPath","file","setFile","showPopup","setShowPopup","showProfilePopup","setShowProfilePopup","message","setMessage","handleProfileClick","handleClick","localStorage","removeItem","push","id","getItem","submitFile","e","preventDefault","fileData","FormData","append","fetch","method","body","then","res","json","result","resp","success","imgPath","dashboard","container","logo","leftside","profilePicDiv","userfiles","filecont","files","target"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Popup } from '../Popup/Popup';\r\nimport { ProfilePopup } from '../Popup/ProfilePopup';\r\nimport dash from './Dashboard.module.css';\r\n\r\nexport const Dashboard = () => {\r\n    let history = useHistory();\r\n\r\n    const [name, setName] = useState('');\r\n    const [profilePicPath, setProfilePicPath] = useState('');\r\n    const [file, setFile] = useState(null);\r\n    const [showPopup, setShowPopup] = useState(false);\r\n    const [showProfilePopup, setShowProfilePopup] = useState(false);\r\n    const [message, setMessage] = useState('');\r\n\r\n    const handleProfileClick = () => {\r\n        setShowProfilePopup(true);\r\n    }\r\n\r\n    const handleClick = () => {\r\n        // sessionStorage.removeItem('email');\r\n        localStorage.removeItem('id');\r\n        history.push('/');\r\n    }\r\n    const id = localStorage.getItem('id');\r\n\r\n    const submitFile = (e) => {\r\n        e.preventDefault();\r\n        const fileData = new FormData();\r\n        fileData.append('pdf', file);\r\n        fileData.append('userId', id);\r\n\r\n        fetch(`/user/files`, {\r\n            method: \"POST\",\r\n            body: fileData,\r\n        }).then(res => {\r\n            res.json().then((result) => {\r\n                setShowPopup(!showPopup);\r\n                setMessage('File uploaded successfully');\r\n            });\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetch(`/user/${id}`).then(resp => {\r\n            resp.json().then((result) => {\r\n\r\n                if (result.success) {\r\n                    setName(result.name);\r\n                    setProfilePicPath(result.profilePicPath);\r\n                }\r\n            });\r\n        });\r\n    })\r\n\r\n    let imgPath = profilePicPath;\r\n    imgPath = 'http://192.168.43.179:4000/' + profilePicPath;\r\n    // imgPath = 'https://drive-beta-akhlesh-dixit.herokuapp.com/' + profilePicPath;\r\n\r\n    return (\r\n        <>\r\n            <div className={dash.dashboard}>\r\n                <div className={dash.container}>\r\n                    <div className={dash.logo}>\r\n                        <h1>DRIVE<span>Beta</span></h1>\r\n                    </div>\r\n                    <div className={dash.leftside}>\r\n                        <div className={dash.profilePicDiv}>\r\n                            <img src={imgPath} alt=\"profile pic\" onClick={handleProfileClick} />\r\n                        </div>\r\n                        <h1>{name}</h1>\r\n                        <button onClick={handleClick}>Sign Out</button>\r\n                    </div>\r\n                </div>\r\n                <div className={dash.userfiles}>\r\n                    <div className={dash.filecont}>\r\n                        <h1>Upload your files</h1>\r\n                        <div className={dash.files}>\r\n                            <form onSubmit={submitFile}>\r\n                                <input type=\"file\" name=\"pdf\" onChange={(e) => { setFile(e.target.files[0]) }} required />\r\n                                <button type=\"submit\">Upload</button>\r\n                            </form>\r\n                        </div>\r\n                        <button onClick={() => { history.push('/user/dashboard/files') }}>Show uploaded files</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <Popup trigger={showPopup} content={message} setTrigger={setShowPopup} />\r\n            <ProfilePopup trigger={showProfilePopup} setTrigger={setShowProfilePopup} setShowPopup={setShowPopup} setMessage={setMessage} />\r\n        </>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}