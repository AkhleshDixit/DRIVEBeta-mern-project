{"ast":null,"code":"import _slicedToArray from\"C:/Users/Akhlesh dixit/Desktop/reactjs/DRIVEBeta/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useHistory,Link}from'react-router-dom';import{Popup}from'../../Components/Popup/Popup';import style from'./Signin.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Signin=function Signin(){var history=useHistory();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showPopup=_useState6[0],setShowPopup=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];useEffect(function(){// if(sessionStorage.getItem('email')){\n//     history.push('/user/dashboard');\n// }\nif(localStorage.getItem('id')){history.push('/user/dashboard');}// if(localStorage.getItem('email')){\n//     history.push('/user/dashboard');\n// }\n},[history]);var handleSubmit=function handleSubmit(e){e.preventDefault();var data={email:email,password:password};fetch('/account/login',{method:\"POST\",headers:{\"Accept\":\"application/json\",\"content-type\":\"application/json\"},body:JSON.stringify(data)}).then(function(response){return response.json();}).then(function(result){if(result.success){// sessionStorage.setItem('email',email);\n// localStorage.setItem('email',email);\nlocalStorage.setItem('id',result.id);history.push('/user/dashboard');}else{setMessage(result.message);setShowPopup(!showPopup);}});};return/*#__PURE__*/_jsx(\"div\",{className:style.signin,children:/*#__PURE__*/_jsxs(\"div\",{className:style.signincontainer,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Sign In\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:email,placeholder:\"email\",onChange:function onChange(e){setEmail(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:password,placeholder:\"password\",onChange:function onChange(e){setPassword(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"SIGN IN\"}),/*#__PURE__*/_jsx(Link,{to:\"/account/forgotpass\",children:\"Forgot password ?\"})]}),/*#__PURE__*/_jsx(Popup,{trigger:showPopup,setTrigger:setShowPopup,content:message})]})});};","map":{"version":3,"sources":["C:/Users/Akhlesh dixit/Desktop/reactjs/DRIVEBeta/frontend/src/Pages/SigninPage/Signin.js"],"names":["React","useState","useEffect","useHistory","Link","Popup","style","Signin","history","email","setEmail","password","setPassword","showPopup","setShowPopup","message","setMessage","localStorage","getItem","push","handleSubmit","e","preventDefault","data","fetch","method","headers","body","JSON","stringify","then","response","json","result","success","setItem","id","signin","signincontainer","target","value"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from 'react';\r\nimport { useHistory, Link } from 'react-router-dom';\r\nimport { Popup } from '../../Components/Popup/Popup';\r\nimport style from './Signin.module.css';\r\n\r\nexport const Signin = () => {\r\n\r\n    let history = useHistory();\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [showPopup, setShowPopup] = useState(false);\r\n    const [message, setMessage] = useState('');\r\n\r\n    useEffect(() => {\r\n        // if(sessionStorage.getItem('email')){\r\n        //     history.push('/user/dashboard');\r\n        // }\r\n        if(localStorage.getItem('id')){\r\n            history.push('/user/dashboard');\r\n        }\r\n        // if(localStorage.getItem('email')){\r\n        //     history.push('/user/dashboard');\r\n        // }\r\n    }, [history]);\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        let data = { email, password };\r\n        fetch('/account/login',\r\n            {\r\n                method: \"POST\",\r\n                headers: { \"Accept\": \"application/json\", \"content-type\": \"application/json\" },\r\n                body: JSON.stringify(data)\r\n            })\r\n            .then(response => response.json())\r\n            .then(result => {\r\n\r\n                if (result.success) {\r\n                    // sessionStorage.setItem('email',email);\r\n                    // localStorage.setItem('email',email);\r\n                    localStorage.setItem('id',result.id);\r\n                    history.push('/user/dashboard');\r\n                }\r\n                else {\r\n                    setMessage(result.message);\r\n                    setShowPopup(!showPopup);\r\n                }\r\n            });\r\n    }\r\n\r\n    return (\r\n        <div className={style.signin}>\r\n            <div className={style.signincontainer}>\r\n                <h1>Sign In</h1>\r\n                <form onSubmit={handleSubmit}>\r\n                    <input type=\"email\" name=\"email\" value={email} placeholder=\"email\" onChange={(e) => { setEmail(e.target.value) }} required />\r\n                    <input type=\"password\" name=\"password\" value={password} placeholder=\"password\" onChange={(e) => { setPassword(e.target.value) }} required />\r\n                    <input type=\"submit\" value=\"SIGN IN\" />\r\n                    <Link to=\"/account/forgotpass\">Forgot password ?</Link>\r\n                </form>\r\n                <Popup trigger={showPopup} setTrigger={setShowPopup} content={message} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}